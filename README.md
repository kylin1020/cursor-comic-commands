# 🎨 Cursor 漫画生成命令集

这是一套完整的 Cursor 自定义命令，用于帮助用户快速从小说转换为漫画项目，并通过 AI 图像生成技术自动创建角色和场景参考图。

---

## 📋 目录

1. [快速开始](#快速开始)
2. [命令详解](#命令详解)
3. [安装说明](#安装说明)
4. [工作流程](#工作流程)
5. [常见问题](#常见问题)
6. [高级功能](#高级功能)

---

## 🚀 快速开始

### 推荐工作流程

```
小说文本 → 拆分章节 → 总结提取 → 项目初始化 → 生成参考图 → 生成分镜 → 生成分镜图
   ↓         ↓         ↓          ↓            ↓          ↓         ↓
 📖    split-novel  summarize  init-comic  generate-images storyboard-chapter generate-images
```

### 最简单的三步开始

1. **拆分章节**（可选） → 使用 `/split-novel-chapters` 命令将长篇小说分割成章节
2. **分析小说** → 使用 `/summarize-novel` 命令分析你的小说，提取角色和场景
3. **初始化项目** → 复制输出结果，使用 `/init-comic` 命令创建项目结构
4. **生成图片** → 使用 `/generate-comic-images` 命令生成所有参考图

### 进阶工作流程（创建动画分镜）

如果你想创建完整的动画分镜脚本，可以继续：

5. **生成分镜脚本** → 使用 `/storyboard-chapter` 命令为指定章节创建分镜脚本
6. **生成分镜图片** → 使用 `/generate-comic-images` 命令为分镜生成前帧、尾帧和视频片段

---

## 📚 命令详解

### 1️⃣ `/split-novel-chapters` - 章节拆分命令

**用途**：将长篇小说从单个 txt 文件拆分成多个独立的章节文件，便于后续分析和处理。

**功能**：
- 📖 自动检测文件编码（UTF-8、GBK、GB2312 等）
- 🔍 智能识别多种章节格式（第X章、Chapter X、自定义模式等）
- 📝 动态生成定制化拆分脚本，不依赖固定规则
- 📁 自动创建 `chapters/` 目录并保存拆分后的文件
- 📊 生成章节索引文件便于管理

**使用方法**：
```
用户：我需要拆分一个小说txt文件，使用 /split-novel-chapters 命令
或：/split-novel-chapters
```

**输入需求**：
- 提供小说的 `.txt` 文件路径

**输出示例**：
```
✅ 章节拆分完成！

📊 统计信息：
- 原始文件：novel.txt (1.2 MB)
- 识别章节：156 章
- 输出目录：chapters/
- 生成文件：156 个 .md 文件
- 索引文件：chapters/README.md

📁 输出文件列表（前10个）：
  chapter_001.md - 第一章 开端
  chapter_002.md - 第二章 相遇
  chapter_003.md - 第三章 转折
  ...
```

**支持的章节格式**：
- 中文数字：`第一章`、`第二章`、`第001章`
- 阿拉伯数字：`第1章`、`第2章`
- 英文格式：`Chapter 1`、`CHAPTER ONE`
- 卷/部分：`第一卷`、`第一部分`
- 混合格式：`第一章 标题名称`、`Chapter 1: 标题名称`

**💡 提示**：
- 系统会自动识别你的 txt 文件格式，无需手动配置
- 如果识别不准确，可以提供示例或自定义正则表达式
- 拆分后可直接使用 `/summarize-novel` 分析章节内容

---

### 2️⃣ `/summarize-novel` - 小说总结分析命令

**用途**：分析小说内容，提取关键信息并生成标准化的项目初始化数据。

**功能**：
- 📖 解析小说文本，提取故事核心
- 👥 识别3-8个主要角色及其外貌、性格、服装特征
- 🏞️ 提取3-10个重要场景及其环境描述
- 📋 生成标准化输出，直接供 `init-comic` 命令使用

**使用方法**：
```
用户：分析一下我的小说，使用 /summarize-novel 命令
或简单地说：/summarize-novel
```

**输入需求**：
- 提供小说的 `.txt` 文件路径

**输出示例**：
```
=================================
漫画项目初始化信息
=================================

【故事总结】
这是一个关于... [300-500字总结]

【主要角色】

1. 角色名：李小明
   - 年龄/性别：25 / 男
   - 外貌特征：
     * 发型发色：黑色短发，齐耳
     * 眼睛：棕色眼睛，深邃
     * 脸型身材：瓜子脸，身材匀称
     * 身高体型：180cm，偏瘦
     * 特殊标记：左肩上有一个疤痕
   - 服装风格：
     * 日常穿着：白色T恤，深色牛仔裤
     * 标志性服装：黑色夹克
     * 配饰：银色项链
   - 性格特点：沉静、聪慧、有责任感
   - 角色关系：与王雪儿是亲密伙伴
   - 角色定位：主角

【主要场景】

1. 场景名：咖啡厅
   - 场景描述：温暖的小咖啡厅，木质家具，软和的灯光
   - 光线氛围：暖黄光线，温馨宁静
   - 重要程度：高

=================================
以上信息可直接复制给 init-comic 命令使用
=================================
```

**💡 提示**：
- 如果小说很长（超过100章），系统会自动分段读取
- 输出可以直接复制给 `init-comic` 命令使用

---

### 3️⃣ `/init-comic` - 漫画项目初始化命令

**用途**：创建完整的漫画项目结构，包括目录、风格定义、角色/场景文件和 AI 图像生成提示词。

**功能**：
- 📁 创建标准化的项目目录结构
- 🎨 建立项目风格定义（支持日系、美式、中国风、韩系等）
- 📝 为每个角色和场景生成详细的 AI 图像生成提示词
- 🖼️ 预创建所有输出目录
- 📚 生成项目README和工作流指南

**使用方法**：
```
用户：请初始化一个漫画项目，我的故事是...
或使用前面 /summarize-novel 的输出：/init-comic [粘贴之前的总结内容]
```

**输入需求**：
- **故事总结**：整个故事的概要（300-500字）
- **主要角色**（3-8个）：姓名、年龄、外貌特征、性格、服装等
- **主要场景**（3-10个）：场景名称、环境描述、氛围等
- **动漫风格**：选择日系/美式/中国风/韩系或自定义
- **特殊需求**：如果涉及历史人物，是否需要历史准确性

**创建的文件/目录**：
```
project-root/
├── style.md                      # 风格定义文档
├── README.md                     # 项目说明
├── characters/                   # 角色定义目录
│   ├── 李小明.md
│   └── 王雪儿.md
├── scenes/                       # 场景定义目录
│   ├── 咖啡厅.md
│   └── 校园操场.md
├── chapters/                     # 章节目录（预留）
└── outputs/                      # 输出目录
    ├── characters/
    │   ├── 李小明/
    │   └── 王雪儿/
    ├── scenes/
    │   ├── 咖啡厅/
    │   └── 校园操场/
    └── chapters/
```

**生成的内容**：
- 每个角色有4个提示词：正面照、三视图、表情参考、动作参考
- 每个场景有3个提示词：远景、中景、近景
- 所有提示词都符合 AI 图像生成最佳实践

**⚠️ 历史人物特殊处理**：
- 如果项目涉及历史人物，系统会自动优化提示词
- 强化历史身份、独特特征、权力气质描述
- 确保生成的形象更符合历史背景和文化象征意义

**💡 提示**：
- 初始化后，项目已准备好进行图片生成
- 建议先生成所有参考图再进行后续工作

---

### 4️⃣ `/generate-comic-images` - AI 图像生成命令

**用途**：使用 AI 自动生成角色参考图和场景参考图，支持批量并发生成。

**功能**：
- 🎨 生成角色参考图（正面照、三视图、表情、动作）
- 🏞️ 生成场景参考图（远景、中景、近景）
- 📊 支持批量并发生成，大幅提高效率
- ✅ 自动质量检查，发现问题自动重试
- 📈 智能参考图应用，保证图片一致性

**使用方法**：
```
示例1：生成单个角色的全部参考图
用户：生成李小明的全部角色参考图
或：/generate-comic-images 李小明

示例2：生成所有角色的正面照
用户：生成所有角色的正面照
或：/generate-comic-images all characters front_view

示例3：生成特定场景的全部视图
用户：生成咖啡厅场景的全部视图
或：/generate-comic-images 咖啡厅 all_angles

示例4：自定义提示词生成
用户：使用这个提示词生成图片：[自定义提示词]
或：/generate-comic-images custom [提示词]
```

**支持的生成类型**：

| 类型 | 说明 | 输出文件 |
|------|------|--------|
| 角色正面照 | 全身站立图，中性表情 | `<角色名>/正面照.png` |
| 角色三视图 | 正面/侧面/背面参考图 | `<角色名>/三视图.png` |
| 角色表情参考 | 6-8个表情合集 | `<角色名>/表情参考.png` |
| 角色动作参考 | 3-5个动作姿势合集 | `<角色名>/动作参考.png` |
| 场景远景 | 全景视角 | `<场景名>/远景.png` |
| 场景中景 | 中景视角 | `<场景名>/中景.png` |
| 场景近景 | 近景细节 | `<场景名>/近景.png` |

**生成顺序**（自动执行）：
```
第一轮：生成所有基础参考图（正面照、远景）
  ↓
第二轮：使用基础参考图生成衍生图（三视图、表情、动作、中景、近景）
  ↓
第三轮：如有分镜脚本，生成分镜图片
```

**质量保证机制**：
- ✅ 自动检查所有生成的图片
- ✅ 验证年龄、外貌一致性
- ✅ 检查风格是否符合定义
- ⚠️ 发现问题自动重新生成

**输出示例**：
```
✅ 第1轮：已生成 5 张基础参考图
  - 李小明/正面照.png
  - 王雪儿/正面照.png
  - 咖啡厅/远景.png
  - 校园操场/远景.png
  - 图书馆/远景.png

✅ 第2轮：已生成 15 张衍生图片
  - 李小明/三视图.png
  - 李小明/表情参考.png
  - 李小明/动作参考.png
  - 王雪儿/三视图.png
  ... [更多图片]

✅ 质量检查完毕，全部图片符合要求
```

**💡 提示**：
- 首次生成所有图片可能需要几分钟
- 系统会使用之前生成的图片作为参考，确保一致性
- 支持断点续传，可以继续生成遗漏的图片

---

### 5️⃣ `/add-character-scene` - 角色场景补充命令

**用途**：在已初始化的项目中新增角色或场景，适合故事推进过程中出现的新人物或地点。

**功能**：
- 👥 快速添加新角色及其全部参考图提示词
- 🏞️ 添加新场景及其视角提示词
- 📝 自动创建对应的 md 文件
- 📁 自动创建输出目录
- 📊 自动更新项目日志

**使用方法**：
```
示例1：添加新角色
用户：我需要添加一个新角色，名叫张伟，是个30岁的警察，会在第8章登场
或：/add-character-scene character 张伟 警察 30

示例2：添加新场景
用户：添加一个新场景，一个现代化的警察局办公室
或：/add-character-scene scene 警察局

示例3：同时添加角色和场景
用户：/add-character-scene both 张伟警察 警察局
```

**输入需求**（取决于添加类型）：

**添加角色时**：
- 角色姓名、年龄、性别、身份
- 外貌特征（发型、发色、眼睛、脸型、身材等）
- 服装设定
- 性格特点
- 与其他角色的关系
- 首次登场章节

**添加场景时**：
- 场景名称和类型
- 环境描述
- 建筑风格和装饰
- 氛围特点（光线、色调、天气）
- 关键元素
- 首次出现章节

**创建的文件**：
```
characters/<新角色名>.md          # 新角色定义文件
outputs/characters/<新角色名>/    # 新角色输出目录
```
或
```
scenes/<新场景名>.md              # 新场景定义文件
outputs/scenes/<新场景名>/        # 新场景输出目录
```

**自动更新**：
- `updates_log.md` - 项目更新日志

**💡 提示**：
- 新增内容会自动遵循项目的风格定义
- 添加完后可以立即使用 `/generate-comic-images` 生成参考图
- 所有新增内容都会记录在项目日志中

---

### 6️⃣ `/storyboard-chapter` - 分镜脚本生成命令

**用途**：为指定章节创建详细的分镜脚本，并生成前帧、尾帧图片提示词和视频片段提示词，为动画/视频制作做准备。

**功能**：
- 📐 智能拆分章节内容为多个分镜镜头
- 🎬 为每个分镜编写脚本（镜头描述、角色动作、对白、情感等）
- 🎥 生成前帧和尾帧图片提示词（用于 AI 图像生成）
- 🎞️ 生成视频片段提示词（用于 AI 视频生成）
- 📊 创建分镜概览表格便于查看和编辑

**使用方法**：
```
示例1：为第1章生成分镜脚本
用户：为第1章生成分镜脚本
或：/storyboard-chapter 1

示例2：为指定章节生成分镜，自定义分镜数量
用户：为第5章生成分镜脚本，大约20个分镜
或：/storyboard-chapter 5 20
```

**输入需求**：
- **章节编号**：第几章（如：1、2、3...）
- **章节标题**：章节的标题（可选，如果项目中已有）
- **章节内容**：完整的章节文本或提纲
- **分镜建议**（可选）：期望的分镜数量或特殊要求

**生成的内容**：
```
chapters/chapter-<章节号>/
├── storyboard.md              # 完整分镜脚本文档
└── outputs/chapters/chapter-<章节号>/storyboard/
    ├── shot-001-first.png     # 前帧图片（需要生成）
    ├── shot-001-last.png      # 尾帧图片（需要生成）
    ├── shot-001-video.txt     # 视频提示词
    ├── shot-002-first.png
    ├── shot-002-last.png
    ├── shot-002-video.txt
    └── ... （更多分镜）
```

**分镜脚本包含**：
- 分镜概览表格（快速浏览所有分镜）
- 详细分镜信息：
  - 镜头类型（特写/近景/中景/远景/全景）
  - 场景和角色信息
  - 分镜描述和对白
  - 情绪和氛围
  - 前帧/尾帧图片提示词
  - 视频片段提示词

**分镜拆分规则**：
- 根据场景切换、时间跳跃、视角变化而拆分
- 快节奏场景：短分镜，频繁切换（3-5秒/镜头）
- 对话场景：适中分镜，反打镜头（5-10秒/镜头）
- 情感场景：长分镜，保持沉浸感（10-15秒/镜头）
- 通常短章节 10-15 个分镜，中等章节 15-25 个，长章节 25-40 个

**💡 提示**：
- 分镜脚本生成后，可用 `/generate-comic-images` 生成分镜的图片和视频
- 前帧和尾帧是动画的起点和终点，决定了视频生成的过渡效果
- 提示词遵循 `style.md` 的风格定义，确保风格一致
- 可以在脚本中多次编辑提示词，重新生成图片和视频

---

## 📁 项目目录结构

### 初始化前的项目结构

```
your-comic-project/
├── novel.txt                    # 源小说文件（需要自行添加）
├── README.md                    # 项目说明
└── .cursor/commands/            # Cursor命令（如果使用项目级命令）
    ├── split-novel-chapters.md
    ├── summarize-novel.md
    ├── init-comic.md
    ├── generate-comic-images.md
    ├── add-character-scene.md
    └── storyboard-chapter.md
```

### 使用 `/split-novel-chapters` 后的结构

```
your-comic-project/
├── novel.txt
├── chapters/                    # 拆分后的章节文件
│   ├── chapter_001.md           # 第一章
│   ├── chapter_002.md           # 第二章
│   ├── chapter_003.md           # 第三章
│   ├── ...
│   └── README.md                # 章节索引
└── README.md
```

### 使用 `/init-comic` 后的完整项目结构

```
your-comic-project/
├── novel.txt
├── chapters/
│   ├── chapter_001.md
│   ├── chapter_002.md
│   ├── ...
│   └── README.md
│
├── style.md                     # 项目风格定义（日系/美式/中国风等）
├── README.md                    # 项目说明
│
├── characters/                  # 角色定义文件
│   ├── 李小明.md               # 每个角色包含外貌、性格、服装、AI提示词
│   ├── 王雪儿.md
│   ├── 张伟.md
│   └── ...
│
├── scenes/                      # 场景定义文件
│   ├── 咖啡厅.md               # 每个场景包含环境、氛围、AI提示词
│   ├── 校园操场.md
│   ├── 警察局.md
│   └── ...
│
├── outputs/                     # 所有输出文件目录
│   ├── characters/              # 角色参考图
│   │   ├── 李小明/
│   │   │   ├── 正面照.png
│   │   │   ├── 三视图.png
│   │   │   ├── 表情参考.png
│   │   │   └── 动作参考.png
│   │   ├── 王雪儿/
│   │   │   ├── 正面照.png
│   │   │   ├── 三视图.png
│   │   │   ├── 表情参考.png
│   │   │   └── 动作参考.png
│   │   └── ...
│   │
│   ├── scenes/                  # 场景参考图
│   │   ├── 咖啡厅/
│   │   │   ├── 远景.png
│   │   │   ├── 中景.png
│   │   │   └── 近景.png
│   │   ├── 校园操场/
│   │   │   ├── 远景.png
│   │   │   ├── 中景.png
│   │   │   └── 近景.png
│   │   └── ...
│   │
│   └── chapters/                # 章节分镜和生成的视觉素材
│       ├── chapter-001/
│       │   └── storyboard/      # 分镜脚本生成的文件
│       │       ├── shot-001-first.png    # 分镜001前帧
│       │       ├── shot-001-last.png     # 分镜001尾帧
│       │       ├── shot-001-video.txt    # 分镜001视频提示词
│       │       ├── shot-002-first.png
│       │       ├── shot-002-last.png
│       │       ├── shot-002-video.txt
│       │       └── ...
│       ├── chapter-002/
│       │   └── storyboard/
│       │       └── ...
│       └── ...
│
├── chapters/                    # （与上面的输入章节文件夹不同）
│   ├── chapter-001/
│   │   └── storyboard.md        # 分镜脚本文档
│   ├── chapter-002/
│   │   └── storyboard.md
│   └── ...
│
└── updates_log.md               # 项目更新日志（自动记录所有操作）
```

### 使用 `/storyboard-chapter` 后的结构（展开详情）

```
chapters/chapter-001/
├── storyboard.md                # 完整分镜脚本文档，包含：
│                                 #   - 分镜概览表格
│                                 #   - 详细分镜信息
│                                 #   - 前帧/尾帧提示词
│                                 #   - 视频片段提示词
│
└── outputs/chapters/chapter-001/storyboard/
    ├── shot-001-first.png       # 分镜001 前帧（执行generate后生成）
    ├── shot-001-last.png        # 分镜001 尾帧（执行generate后生成）
    ├── shot-001-video.txt       # 分镜001 视频提示词文本
    ├── shot-002-first.png
    ├── shot-002-last.png
    ├── shot-002-video.txt
    ├── shot-003-first.png
    ├── shot-003-last.png
    ├── shot-003-video.txt
    └── ... （所有分镜的图片和提示词）
```

### 关键文件说明

| 文件 | 说明 |
|------|------|
| `style.md` | 项目的整体视觉风格定义，包括色彩、线条、光影、AI生成关键词 |
| `characters/*.md` | 角色定义文件，包含基本信息、外貌、服装、性格、AI图像提示词 |
| `scenes/*.md` | 场景定义文件，包含环境、氛围、关键元素、AI图像提示词 |
| `updates_log.md` | 项目操作日志，记录所有执行的命令和生成的内容 |
| `outputs/` | 所有生成的图片存储位置 |
| `chapters/chapter-N/storyboard.md` | 第N章的完整分镜脚本 |

---

## 🛠️ 安装说明

### 方式一：个人命令库（推荐）

命令保存位置：`~/.cursor/commands/`

**步骤**：
1. 创建 `~/.cursor/commands` 目录（如果不存在）
   ```bash
   mkdir -p ~/.cursor/commands
   ```

2. 将以下文件复制到该目录：
   - `split-novel-chapters.md`
   - `summarize-novel.md`
   - `init-comic.md`
   - `generate-comic-images.md`
   - `add-character-scene.md`
   - `storyboard-chapter.md`

3. 重启 Cursor（可能需要）

4. 在 Cursor 中按 `Cmd+K`（Mac）或 `Ctrl+K`（Windows/Linux），搜索命令即可使用

### 方式二：项目级命令库

命令保存位置：`<项目根目录>/.cursor/commands/`

**步骤**：
1. 在项目根目录下创建 `.cursor/commands` 目录
2. 将命令文件复制到该目录
3. 这样只有该项目可以使用这些命令

### 验证安装

在 Cursor 中按 `Cmd+K`（Mac）或 `Ctrl+K`（Windows/Linux），搜索任一命令（如 `/split-novel-chapters` 或 `/summarize-novel`），如果出现该命令则安装成功。

---

## 📊 工作流程

### 完整的漫画生成流程

```
┌─────────────────────────────────────────────────────────────┐
│  第1步：准备小说文本                                         │
│  📖 拥有一部完整或草稿的小说                                 │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│  第2步：拆分章节（可选，适合长篇）                           │
│  💻 使用 /split-novel-chapters 命令                         │
│  📁 输出：chapters/ 目录下的独立章节文件                     │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│  第3步：分析小说并提取信息                                   │
│  💻 使用 /summarize-novel 命令                              │
│  📋 输出：故事总结、角色列表、场景列表                       │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│  第4步：初始化漫画项目                                       │
│  💻 使用 /init-comic 命令                                   │
│  📁 输出：项目结构、风格定义、角色场景文件                   │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│  第5步：生成参考图片                                         │
│  💻 使用 /generate-comic-images 命令                        │
│  🖼️ 输出：所有角色和场景的参考图                            │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│  第6步：后续补充（可选）                                     │
│  💻 使用 /add-character-scene 命令                          │
│  👥 添加故事发展过程中的新角色/场景                         │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│  第7步：创建分镜脚本（高级，用于动画/视频）                 │
│  📐 使用 /storyboard-chapter 命令                           │
│  🎬 输出：详细分镜脚本和视频生成提示词                       │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│  第8步：生成分镜图片和视频（可选）                           │
│  💻 使用 /generate-comic-images 命令                        │
│  🎥 输出：分镜前帧、尾帧图片和视频文件                       │
└─────────────────────────────────────────────────────────────┘
```

### 典型使用场景

#### 场景1：快速原型制作（仅生成参考图）
适合：想快速看到小说的漫画形式，只需要角色和场景参考图
```
1. /summarize-novel → 提取关键元素
2. /init-comic → 创建基础结构
3. /generate-comic-images → 生成主要角色和场景
```
**时间**：30-60分钟
**产出**：角色/场景参考图集

#### 场景2：完整项目开发（包含分镜脚本）
适合：要创建一个完整的漫画项目或动画项目
```
1. /split-novel-chapters → 拆分长篇小说（可选）
2. /summarize-novel → 全面分析
3. /init-comic → 详细规划
4. /generate-comic-images → 生成所有参考图
5. /storyboard-chapter → 为指定章节创建分镜脚本
6. /generate-comic-images → 生成分镜前帧、尾帧和视频片段
```
**时间**：4-8小时
**产出**：完整参考图 + 详细分镜脚本 + 分镜视觉素材

#### 场景3：增量扩展（添加新角色/场景）
适合：故事发展中添加新元素
```
1. 项目已存在
2. /add-character-scene → 添加新角色/场景
3. /generate-comic-images → 生成新内容的参考图
```
**时间**：5-15分钟（取决于数量）

#### 场景4：只需生成分镜脚本（项目已有）
适合：项目已初始化，只需为特定章节生成分镜脚本
```
1. 项目已存在且所有角色/场景已定义
2. /storyboard-chapter → 为指定章节生成分镜脚本
3. /generate-comic-images → 为分镜脚本生成图片和视频
```
**时间**：30分钟-2小时（取决于章节长度和分镜数量）

---

## ❓ 常见问题

### Q1：如何修改已生成的角色/场景设定？

**A**：直接编辑对应的 md 文件（如 `characters/李小明.md`），修改后使用 `/generate-comic-images` 重新生成。

### Q2：可以生成多少个角色和场景？

**A**：
- **推荐**：角色 3-8 个，场景 3-10 个
- **最多**：理论上没有限制，但过多会增加工作量和成本
- **提示**：可以分批处理

### Q3：生成的图片质量如何保证？

**A**：系统有自动质量检查机制：
1. 检查年龄、外貌一致性
2. 验证风格是否符合定义
3. 发现问题自动重新生成

### Q4：可以使用自定义风格吗？

**A**：可以！在 `/init-cosmic` 时选择"自定义风格"，详细描述你想要的风格特点。

### Q5：生成过程中出错怎么办？

**A**：
1. 检查项目结构是否完整
2. 查看是否有缺失的 md 文件
3. 尝试重新运行命令
4. 如果问题持续，检查 Cursor 连接和 API 额度

### Q6：如何保存/分享生成的项目？

**A**：
1. 整个项目目录都可以保存
2. 可以上传到 GitHub 或其他版本控制系统
3. 推荐压缩后分享，包含所有文件

### Q7：可以修改生成的提示词吗？

**A**：
1. 编辑对应的 md 文件中的提示词部分
2. 使用 `/generate-comic-images` 重新生成
3. 或使用 `custom` 参数自定义提示词

### Q8：生成的图片存储在哪里？

**A**：所有图片保存在项目的 `outputs/` 目录下：
- 角色图：`outputs/characters/<角色名>/`
- 场景图：`outputs/scenes/<场景名>/`

### Q9：如何处理项目中的历史人物？

**A**：系统有特殊的历史人物处理流程：
1. 在 `/init-comic` 时告知包含历史人物
2. 系统会自动优化提示词以保证历史准确性
3. 强调标志性特征、权力特征、历史背景等

### Q10：可以取消已经开始的生成过程吗？

**A**：
1. 可以中断当前操作（Ctrl+C 或在 UI 中停止）
2. 已生成的图片会保留
3. 可以继续生成遗漏的部分

---

## 📝 项目文件说明

### style.md - 风格定义文件

包含：
- 色彩方案（主色、辅助色等）
- 线条风格（粗细、类型等）
- 光影处理规则
- AI 生成通用关键词

**示例**：
```markdown
# 项目风格定义

## 风格选择：日系动漫风格

## 色彩方案
- 主色调：暖色调
- ...

## AI生成通用关键词
- 高清精细画面
- 日系动漫风格
- ...
```

### characters/\<角色名\>.md - 角色定义文件

包含：
- 基本信息（姓名、年龄、身份）
- 外貌特征详细描述
- 服装设定
- 性格特点
- 角色关系
- 4个 AI 生成提示词（正面照、三视图、表情、动作）

### scenes/\<场景名\>.md - 场景定义文件

包含：
- 基本信息（名称、类型、功能）
- 环境描述
- 氛围特点
- 关键元素
- 3个 AI 生成提示词（远景、中景、近景）

### outputs/ - 输出目录

生成的所有图片都保存在这里，按照角色/场景分组。

---

## 🎯 最佳实践

1. **从小到大**：先生成关键角色/场景，再补充次要元素
2. **质量优先**：使用自动质量检查，确保所有图片符合要求
3. **风格一致**：遵循 `style.md` 的定义，确保整体风格统一
4. **参考优化**：使用参考图输入可以显著提高一致性和质量
5. **增量更新**：项目完成后新增内容，使用 `/add-character-scene` 命令
6. **文档维护**：定期查看和更新 `updates_log.md`，记录项目进展

---

## 🚀 高级功能

### 推荐的 AI 模型与工具栈

#### 📖 文本分析与内容理解（用于 `/summarize-novel` 和 `/storyboard-chapter`）

本项目推荐使用以下高性能 AI 大模型进行小说分析和分镜脚本生成：

| 模型 | 性能 | 推荐场景 | 说明 |
|------|------|--------|------|
| **Claude Sonnet 4.5** | 🌟🌟🌟🌟🌟 | 主要推荐 | 文本理解能力最强，特别擅长长篇小说分析、角色刻画、情节逻辑推导 |
| **Claude Haiku 4.5** | 🌟🌟🌟🌟 | 快速处理 | 速度快，成本低，适合处理已有框架的内容，如补充场景描述 |
| **Gemini 2.5 Pro** | 🌟🌟🌟🌟🌟 | 多模态处理 | 多模态能力强，可处理图文混合内容，适合动态分析 |

**使用建议**：
- **小说总结和角色提取**：使用 Claude Sonnet 4.5 获得最佳质量
- **分镜脚本生成**：使用 Claude Sonnet 4.5（深度分析）或 Claude Haiku 4.5（快速迭代）
- **场景补充描述**：使用 Claude Haiku 4.5（高效且成本低）
- **视觉一致性检查**：使用 Gemini 2.5 Pro（多模态理解）

#### 🎨 图像生成（用于 `/generate-comic-images`）

**SeedDream 4.0 + MCP 集成（推荐）**

项目现已支持通过 MCP 集成 **SeedDream 4.0**，这是一个强大的 AI 图像生成模型：

- **项目地址**：https://github.com/kylin1020/seedream-v4-volcengine-mcp
- **优势**：
  - ✅ 支持中英双语提示词
  - ✅ 支持参考图输入（img2img），保持风格一致性
  - ✅ 支持多尺寸和批量生成
  - ✅ 与 Cursor 通过 MCP 无缝集成
  - ✅ 高速生成，成本优化

**SeedDream 4.0 使用工作流**：

1. **生成基础参考图**
   ```
   输入：角色/场景的详细描述提示词（来自 style.md + characters.md / scenes.md）
   输出：高质量的角色正面照或场景远景图
   ```

2. **使用参考图生成衍生图**（保证风格一致）
   ```
   输入：基础参考图 + 新的提示词（如三视图、表情、不同场景等）
   输出：保持外貌/风格一致的衍生图片
   ```

3. **质量检查和改进**
   ```
   - 检查：年龄一致性、服装细节、外貌特征
   - 如有问题：调整提示词并使用参考图重新生成
   - 确保：整体风格统一、光影协调、构图合理
   ```

4. **分镜图片生成**
   ```
   输入：分镜脚本的前帧/尾帧提示词 + 前面的角色/场景参考图
   输出：符合分镜要求且风格一致的镜头图片
   ```

**其他图像生成工具**：

| 工具 | 优势 | 适用场景 |
|------|------|--------|
| Midjourney | 质量高，风格多样 | 需要高质量参考图时的替代方案 |
| DALL-E 3 | 中文支持好，理解准确 | 需要快速生成多个变体 |
| Stable Diffusion | 本地部署，隐私性好 | 对隐私有要求的项目 |

#### 🎬 视频生成与编辑

**视频生成工具**（用于 `/storyboard-chapter` 生成的视频提示词）：

| 工具 | 功能 | 说明 |
|------|------|------|
| Runway Gen-3 | 文本→视频 / 图像→视频 | 最新生成模型，效果最好 |
| Pika 1.0 | 高质量短视频生成 | 特别适合 3-10 秒的镜头生成 |
| Stable Video Diffusion | 开源视频生成 | 可本地运行，定制化强 |
| Luma Dream Machine | 高保真视频 | 特别适合复杂动作场景 |

**视频编辑与后期**：

| 工具 | 平台 | 说明 |
|------|------|------|
| Adobe Premiere Pro | Windows/Mac | 行业标准，功能最全 |
| DaVinci Resolve | Windows/Mac/Linux | 免费且功能强大，有色彩分级 |
| Final Cut Pro | Mac | 快速渲染，专业级输出 |
| 剪映 / CapCut | 移动端 | 快速制作，分享友好 |

### 分镜脚本与动画生成

`/storyboard-chapter` 命令支持将文字内容转换为详细的分镜脚本，是创建动画或视频的基础：

**完整的分镜工作流**：
1. 为小说章节创建分镜脚本（包含前帧、尾帧、视频提示词）
2. 使用 SeedDream 4.0 通过 MCP 生成前帧和尾帧图片（可使用参考图保持一致性）
3. 使用 AI 视频生成工具（Runway Gen-3、Pika 等）根据前帧→尾帧的过渡生成视频片段
4. 使用视频编辑软件（Premiere Pro、DaVinci Resolve 等）将视频片段组合成完整章节视频
5. 添加配音、音效和字幕完成最终制作

### 自定义风格和高级设置

项目初始化后，可以通过编辑 `style.md` 来自定义：

- **视觉风格**：日系、美式、中国风、韩系、写实、抽象等
- **色彩方案**：主色、辅助色、强调色的具体定义
- **线条风格**：线条粗细、类型（硬边、柔和等）
- **光影处理**：光影强度、方向、特殊效果
- **特殊要求**：如历史人物的历史准确性、特殊气质等

### 大规模项目管理

对于包含大量章节的项目：

1. **分阶段处理**：按章节分批生成分镜和图片，而不是一次性处理所有内容
2. **版本管理**：使用 Git 跟踪项目变化，便于回溯和协作
3. **资源优化**：根据优先级生成关键章节的内容，非关键内容可延后处理
4. **质量检查**：定期审查 `updates_log.md` 确保项目进度和质量

---

## 📖 完整使用指南

### 快速开始（10 分钟内）

```bash
# 1. 克隆项目或创建新项目
mkdir my-comic-project && cd my-comic-project

# 2. 添加小说文件
# 将你的 novel.txt 放到项目根目录

# 3. 在 Cursor 中按 Cmd+K（Mac）或 Ctrl+K（Windows）
# 执行命令序列：
/split-novel-chapters          # 拆分小说
/summarize-novel              # 分析小说
/init-comic                   # 初始化项目
/generate-comic-images        # 生成参考图
```

### 详细工作流程

#### 第 1 步：准备项目

```bash
# 创建项目目录结构
git clone <your-repo> comic-project
cd comic-project
cp /path/to/novel.txt .
```

#### 第 2 步：拆分小说章节

在 Cursor 中执行：`/split-novel-chapters`

```
输入：novel.txt 的路径
输出：
  - chapters/chapter_001.md
  - chapters/chapter_002.md
  - chapters/README.md（章节索引）
```

#### 第 3 步：分析小说提取信息

在 Cursor 中执行：`/summarize-novel`

```
输入：chapters/chapter_001.md（或整个 novel.txt）
输出：
  - 故事总结（300-500字）
  - 主要角色（3-8个）及其详细描述
  - 主要场景（3-10个）及其环境描述

💡 提示：复制此输出给 /init-comic 命令
```

#### 第 4 步：初始化漫画项目

在 Cursor 中执行：`/init-comic [粘贴 summarize-novel 的输出]`

```
系统会自动：
  1. 创建 style.md（风格定义）
  2. 创建 characters/*.md（角色文件）
  3. 创建 scenes/*.md（场景文件）
  4. 创建 outputs/ 目录结构
  5. 记录到 updates_log.md

结果：完整的项目结构已准备好
```

#### 第 5-6 步：生成参考图片

**批次 1：基础参考图**

在 Cursor 中执行：`/generate-comic-images all characters front_view`

```
生成所有角色的正面照，用作参考图输入
```

然后执行：`/generate-comic-images all scenes far_view`

```
生成所有场景的远景，用作参考图输入
```

**批次 2：衍生参考图**

在 Cursor 中执行：`/generate-comic-images all characters all_angles`

```
使用基础参考图作为 img2img 输入
生成：三视图、表情、动作等
系统自动检查一致性并重试如有问题
```

#### 第 7 步：为每个章节生成分镜脚本

在 Cursor 中执行：`/storyboard-chapter 1`

```
输入：
  - 章节编号：1
  - 章节标题：自动读取
  - 章节内容：自动读取

系统建议分镜数量：
  - 短章节（<1000字）：10-15
  - 中章节（1000-2000字）：15-25
  - 长章节（>2000字）：25-40

输出：
  - chapters/chapter-1/storyboard.md（完整分镜脚本）
  - 包含分镜概览表和详细提示词
```

#### 第 8 步：生成分镜视觉素材

在 Cursor 中执行：`/generate-comic-images chapter 1 storyboard`

```
系统会按以下顺序生成：
1. 前帧图片（shot-XXX-first.png）
2. 尾帧图片（shot-XXX-last.png）
3. 视频提示词（shot-XXX-video.txt）

使用参考图确保一致性
```

#### 第 9 步：使用 SeedDream 4.0 MCP 生成高质量图片

```
项目集成了 SeedDream 4.0：
- GitHub：https://github.com/kylin1020/seedream-v4-volcengine-mcp
- 功能：文本→图像、图像→图像（img2img）、批量生成

工作流：
1. 使用 AI 提示词（来自 storyboard.md）
2. 输入到 SeedDream MCP
3. 可选择参考图进行 img2img 生成
4. 获得高质量的分镜图片

质量保证：
- 验证年龄和外貌一致性
- 检查服装细节
- 检查场景一致性
- 如有问题自动调整提示词重试
```

#### 第 10 步：视频生成与合成

```
对于每个分镜的视频片段：

1. 使用 AI 视频生成工具
   - Runway Gen-3（推荐，效果最好）
   - Pika 1.0
   - Stable Video Diffusion

2. 输入：
   - 前帧图片（shot-001-first.png）
   - 尾帧图片（shot-001-last.png）
   - 视频提示词（shot-001-video.txt）

3. 输出：3-10 秒的视频片段

4. 使用视频编辑软件组合：
   - DaVinci Resolve（免费、功能强）
   - Adobe Premiere Pro（专业级）
   - 剪映 / CapCut（快速）

5. 添加：
   - 转场效果
   - 配音
   - 音效
   - 字幕
```

### 关键概念说明

**参考图输入（img2img）**：
- 首次生成基础角色/场景图
- 后续使用基础图作为参考输入生成衍生图
- 确保所有衍生图与基础图风格一致
- SeedDream 支持此功能，在 `reference_images` 参数中传入

**质量检查循环**：
```
生成图片 → 检查一致性 → 如有问题 → 调整提示词 + 参考图 → 重新生成
检查项：
  ✓ 年龄和外貌
  ✓ 服装和配饰
  ✓ 场景和光影
  ✓ 整体风格
```

**分阶段生成**：
- 不必一次性生成所有内容
- 可以先完成几个章节，测试效果
- 然后根据需要调整风格后再生成其他章节

---

## 📞 获取帮助

- 遇到问题时，查看相应命令的详细说明
- 每个命令都有详细的任务清单和执行说明
- 查看 `updates_log.md` 了解项目的操作历史
- 检查生成的 `style.md`、`characters/`、`scenes/` 文件，确保定义准确

---

## 📄 许可证

这套命令集可自由使用和修改。

---

**祝你创作愉快！🎨** 

有任何问题或建议，欢迎反馈！

