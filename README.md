# 🎨 Cursor 漫画生成命令集

这是一套完整的 Cursor 自定义命令，用于帮助用户快速从小说转换为漫画项目，并通过 AI 图像生成技术自动创建角色和场景参考图。

---

## 📋 目录

1. [快速开始](#快速开始)
2. [命令详解](#命令详解)
3. [安装说明](#安装说明)
4. [工作流程](#工作流程)
5. [常见问题](#常见问题)

---

## 🚀 快速开始

### 推荐工作流程

```
小说文本 → 总结提取 → 项目初始化 → 生成参考图 → 添加补充内容 → 生成分镜
   ↓          ↓           ↓            ↓             ↓            ↓
 📖      summarize-novel  init-comic  generate-images add-character-scene generate-images
```

### 最简单的三步开始

1. **分析小说** → 使用 `/summarize-novel` 命令分析你的小说
2. **初始化项目** → 复制输出结果，使用 `/init-comic` 命令创建项目结构
3. **生成图片** → 使用 `/generate-comic-images` 命令生成所有参考图

---

## 📚 命令详解

### 1️⃣ `/summarize-novel` - 小说分析命令

**用途**：分析小说内容，提取关键信息并生成标准化的项目初始化数据。

**功能**：
- 📖 解析小说文本，提取故事核心
- 👥 识别3-8个主要角色及其外貌、性格、服装特征
- 🏞️ 提取3-10个重要场景及其环境描述
- 📋 生成标准化输出，直接供 `init-comic` 命令使用

**使用方法**：
```
用户：分析一下我的小说，使用 /summarize-novel 命令
或简单地说：/summarize-novel
```

**输入需求**：
- 提供小说的 `.txt` 文件路径

**输出示例**：
```
=================================
漫画项目初始化信息
=================================

【故事总结】
这是一个关于... [300-500字总结]

【主要角色】

1. 角色名：李小明
   - 年龄/性别：25 / 男
   - 外貌特征：
     * 发型发色：黑色短发，齐耳
     * 眼睛：棕色眼睛，深邃
     * 脸型身材：瓜子脸，身材匀称
     * 身高体型：180cm，偏瘦
     * 特殊标记：左肩上有一个疤痕
   - 服装风格：
     * 日常穿着：白色T恤，深色牛仔裤
     * 标志性服装：黑色夹克
     * 配饰：银色项链
   - 性格特点：沉静、聪慧、有责任感
   - 角色关系：与王雪儿是亲密伙伴
   - 角色定位：主角

【主要场景】

1. 场景名：咖啡厅
   - 场景描述：温暖的小咖啡厅，木质家具，软和的灯光
   - 光线氛围：暖黄光线，温馨宁静
   - 重要程度：高

=================================
以上信息可直接复制给 init-comic 命令使用
=================================
```

**💡 提示**：
- 如果小说很长（超过100章），系统会自动分段读取
- 输出可以直接复制给 `init-comic` 命令使用

---

### 2️⃣ `/init-comic` - 项目初始化命令

**用途**：创建完整的漫画项目结构，包括目录、风格定义、角色/场景文件和 AI 图像生成提示词。

**功能**：
- 📁 创建标准化的项目目录结构
- 🎨 建立项目风格定义（支持日系、美式、中国风、韩系等）
- 📝 为每个角色和场景生成详细的 AI 图像生成提示词
- 🖼️ 预创建所有输出目录
- 📚 生成项目README和工作流指南

**使用方法**：
```
用户：请初始化一个漫画项目，我的故事是...
或使用前面 /summarize-novel 的输出：/init-comic [粘贴之前的总结内容]
```

**输入需求**：
- **故事总结**：整个故事的概要（300-500字）
- **主要角色**（3-8个）：姓名、年龄、外貌特征、性格、服装等
- **主要场景**（3-10个）：场景名称、环境描述、氛围等
- **动漫风格**：选择日系/美式/中国风/韩系或自定义
- **特殊需求**：如果涉及历史人物，是否需要历史准确性

**创建的文件/目录**：
```
project-root/
├── style.md                      # 风格定义文档
├── README.md                     # 项目说明
├── characters/                   # 角色定义目录
│   ├── 李小明.md
│   └── 王雪儿.md
├── scenes/                       # 场景定义目录
│   ├── 咖啡厅.md
│   └── 校园操场.md
├── chapters/                     # 章节目录（预留）
└── outputs/                      # 输出目录
    ├── characters/
    │   ├── 李小明/
    │   └── 王雪儿/
    ├── scenes/
    │   ├── 咖啡厅/
    │   └── 校园操场/
    └── chapters/
```

**生成的内容**：
- 每个角色有4个提示词：正面照、三视图、表情参考、动作参考
- 每个场景有3个提示词：远景、中景、近景
- 所有提示词都符合 AI 图像生成最佳实践

**⚠️ 历史人物特殊处理**：
- 如果项目涉及历史人物，系统会自动优化提示词
- 强化历史身份、独特特征、权力气质描述
- 确保生成的形象更符合历史背景和文化象征意义

**💡 提示**：
- 初始化后，项目已准备好进行图片生成
- 建议先生成所有参考图再进行后续工作

---

### 3️⃣ `/generate-comic-images` - 图像生成命令

**用途**：使用 AI 自动生成角色参考图和场景参考图，支持批量并发生成。

**功能**：
- 🎨 生成角色参考图（正面照、三视图、表情、动作）
- 🏞️ 生成场景参考图（远景、中景、近景）
- 📊 支持批量并发生成，大幅提高效率
- ✅ 自动质量检查，发现问题自动重试
- 📈 智能参考图应用，保证图片一致性

**使用方法**：
```
示例1：生成单个角色的全部参考图
用户：生成李小明的全部角色参考图
或：/generate-comic-images 李小明

示例2：生成所有角色的正面照
用户：生成所有角色的正面照
或：/generate-comic-images all characters front_view

示例3：生成特定场景的全部视图
用户：生成咖啡厅场景的全部视图
或：/generate-comic-images 咖啡厅 all_angles

示例4：自定义提示词生成
用户：使用这个提示词生成图片：[自定义提示词]
或：/generate-comic-images custom [提示词]
```

**支持的生成类型**：

| 类型 | 说明 | 输出文件 |
|------|------|--------|
| 角色正面照 | 全身站立图，中性表情 | `<角色名>/正面照.png` |
| 角色三视图 | 正面/侧面/背面参考图 | `<角色名>/三视图.png` |
| 角色表情参考 | 6-8个表情合集 | `<角色名>/表情参考.png` |
| 角色动作参考 | 3-5个动作姿势合集 | `<角色名>/动作参考.png` |
| 场景远景 | 全景视角 | `<场景名>/远景.png` |
| 场景中景 | 中景视角 | `<场景名>/中景.png` |
| 场景近景 | 近景细节 | `<场景名>/近景.png` |

**生成顺序**（自动执行）：
```
第一轮：生成所有基础参考图（正面照、远景）
  ↓
第二轮：使用基础参考图生成衍生图（三视图、表情、动作、中景、近景）
  ↓
第三轮：如有分镜脚本，生成分镜图片
```

**质量保证机制**：
- ✅ 自动检查所有生成的图片
- ✅ 验证年龄、外貌一致性
- ✅ 检查风格是否符合定义
- ⚠️ 发现问题自动重新生成

**输出示例**：
```
✅ 第1轮：已生成 5 张基础参考图
  - 李小明/正面照.png
  - 王雪儿/正面照.png
  - 咖啡厅/远景.png
  - 校园操场/远景.png
  - 图书馆/远景.png

✅ 第2轮：已生成 15 张衍生图片
  - 李小明/三视图.png
  - 李小明/表情参考.png
  - 李小明/动作参考.png
  - 王雪儿/三视图.png
  ... [更多图片]

✅ 质量检查完毕，全部图片符合要求
```

**💡 提示**：
- 首次生成所有图片可能需要几分钟
- 系统会使用之前生成的图片作为参考，确保一致性
- 支持断点续传，可以继续生成遗漏的图片

---

### 4️⃣ `/add-character-scene` - 补充命令

**用途**：在已初始化的项目中新增角色或场景，适合故事推进过程中出现的新人物或地点。

**功能**：
- 👥 快速添加新角色及其全部参考图提示词
- 🏞️ 添加新场景及其视角提示词
- 📝 自动创建对应的 md 文件
- 📁 自动创建输出目录
- 📊 自动更新项目日志

**使用方法**：
```
示例1：添加新角色
用户：我需要添加一个新角色，名叫张伟，是个30岁的警察，会在第8章登场
或：/add-character-scene character 张伟 警察 30

示例2：添加新场景
用户：添加一个新场景，一个现代化的警察局办公室
或：/add-character-scene scene 警察局

示例3：同时添加角色和场景
用户：/add-character-scene both 张伟警察 警察局
```

**输入需求**（取决于添加类型）：

**添加角色时**：
- 角色姓名、年龄、性别、身份
- 外貌特征（发型、发色、眼睛、脸型、身材等）
- 服装设定
- 性格特点
- 与其他角色的关系
- 首次登场章节

**添加场景时**：
- 场景名称和类型
- 环境描述
- 建筑风格和装饰
- 氛围特点（光线、色调、天气）
- 关键元素
- 首次出现章节

**创建的文件**：
```
characters/<新角色名>.md          # 新角色定义文件
outputs/characters/<新角色名>/    # 新角色输出目录
```
或
```
scenes/<新场景名>.md              # 新场景定义文件
outputs/scenes/<新场景名>/        # 新场景输出目录
```

**自动更新**：
- `updates_log.md` - 项目更新日志

**💡 提示**：
- 新增内容会自动遵循项目的风格定义
- 添加完后可以立即使用 `/generate-comic-images` 生成参考图
- 所有新增内容都会记录在项目日志中

---

## 🛠️ 安装说明

### 方式一：个人命令库（推荐）

命令保存位置：`~/.cursor/commands/`

**步骤**：
1. 创建 `~/.cursor/commands` 目录（如果不存在）
   ```bash
   mkdir -p ~/.cursor/commands
   ```

2. 将以下文件复制到该目录：
   - `init-comic.md`
   - `add-character-scene.md`
   - `generate-comic-images.md`
   - `summarize-novel.md`

3. 重启 Cursor（可能需要）

4. 在 Cursor 中按 `Cmd+K`（Mac）或 `Ctrl+K`（Windows/Linux），搜索命令即可使用

### 方式二：项目级命令库

命令保存位置：`<项目根目录>/.cursor/commands/`

**步骤**：
1. 在项目根目录下创建 `.cursor/commands` 目录
2. 将命令文件复制到该目录
3. 这样只有该项目可以使用这些命令

### 验证安装

在 Cursor 中输入 `Cmd+K` 或 `Ctrl+K`，搜索 `/summarize-novel`，如果出现该命令则安装成功。

---

## 📊 工作流程

### 完整的漫画生成流程

```
┌─────────────────────────────────────────────────────────────┐
│  第1步：准备小说文本                                         │
│  📖 拥有一部完整或草稿的小说                                 │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│  第2步：分析小说并提取信息                                   │
│  💻 使用 /summarize-novel 命令                              │
│  📋 输出：故事总结、角色列表、场景列表                       │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│  第3步：初始化漫画项目                                       │
│  💻 使用 /init-comic 命令                                   │
│  📁 输出：项目结构、风格定义、角色场景文件                   │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│  第4步：生成参考图片                                         │
│  💻 使用 /generate-comic-images 命令                        │
│  🖼️ 输出：所有角色和场景的参考图                            │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│  第5步：后续补充（可选）                                     │
│  💻 使用 /add-character-scene 命令                          │
│  👥 添加故事发展过程中的新角色/场景                         │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│  第6步：创建分镜脚本（高级）                                 │
│  📐 为具体章节创建分镜脚本                                   │
│  💻 使用 /generate-comic-images 生成分镜图                 │
└─────────────────────────────────────────────────────────────┘
```

### 典型使用场景

#### 场景1：快速原型制作
适合：想快速看到小说的漫画形式
```
1. /summarize-novel → 提取关键元素
2. /init-comic → 创建基础结构
3. /generate-comic-images → 生成主要角色和场景
```
**时间**：30-60分钟

#### 场景2：完整项目开发
适合：要创建一个完整的漫画项目
```
1. /summarize-novel → 全面分析
2. /init-comic → 详细规划
3. /generate-comic-images → 生成所有参考图
4. 创建分镜脚本（可选）
5. /generate-comic-images → 生成分镜图
```
**时间**：2-4小时

#### 场景3：增量扩展
适合：故事发展中添加新元素
```
1. 项目已存在
2. /add-character-scene → 添加新角色/场景
3. /generate-comic-images → 生成新内容的参考图
```
**时间**：5-15分钟（取决于数量）

---

## ❓ 常见问题

### Q1：如何修改已生成的角色/场景设定？

**A**：直接编辑对应的 md 文件（如 `characters/李小明.md`），修改后使用 `/generate-comic-images` 重新生成。

### Q2：可以生成多少个角色和场景？

**A**：
- **推荐**：角色 3-8 个，场景 3-10 个
- **最多**：理论上没有限制，但过多会增加工作量和成本
- **提示**：可以分批处理

### Q3：生成的图片质量如何保证？

**A**：系统有自动质量检查机制：
1. 检查年龄、外貌一致性
2. 验证风格是否符合定义
3. 发现问题自动重新生成

### Q4：可以使用自定义风格吗？

**A**：可以！在 `/init-cosmic` 时选择"自定义风格"，详细描述你想要的风格特点。

### Q5：生成过程中出错怎么办？

**A**：
1. 检查项目结构是否完整
2. 查看是否有缺失的 md 文件
3. 尝试重新运行命令
4. 如果问题持续，检查 Cursor 连接和 API 额度

### Q6：如何保存/分享生成的项目？

**A**：
1. 整个项目目录都可以保存
2. 可以上传到 GitHub 或其他版本控制系统
3. 推荐压缩后分享，包含所有文件

### Q7：可以修改生成的提示词吗？

**A**：
1. 编辑对应的 md 文件中的提示词部分
2. 使用 `/generate-comic-images` 重新生成
3. 或使用 `custom` 参数自定义提示词

### Q8：生成的图片存储在哪里？

**A**：所有图片保存在项目的 `outputs/` 目录下：
- 角色图：`outputs/characters/<角色名>/`
- 场景图：`outputs/scenes/<场景名>/`

### Q9：如何处理项目中的历史人物？

**A**：系统有特殊的历史人物处理流程：
1. 在 `/init-comic` 时告知包含历史人物
2. 系统会自动优化提示词以保证历史准确性
3. 强调标志性特征、权力特征、历史背景等

### Q10：可以取消已经开始的生成过程吗？

**A**：
1. 可以中断当前操作（Ctrl+C 或在 UI 中停止）
2. 已生成的图片会保留
3. 可以继续生成遗漏的部分

---

## 📝 项目文件说明

### style.md - 风格定义文件

包含：
- 色彩方案（主色、辅助色等）
- 线条风格（粗细、类型等）
- 光影处理规则
- AI 生成通用关键词

**示例**：
```markdown
# 项目风格定义

## 风格选择：日系动漫风格

## 色彩方案
- 主色调：暖色调
- ...

## AI生成通用关键词
- 高清精细画面
- 日系动漫风格
- ...
```

### characters/\<角色名\>.md - 角色定义文件

包含：
- 基本信息（姓名、年龄、身份）
- 外貌特征详细描述
- 服装设定
- 性格特点
- 角色关系
- 4个 AI 生成提示词（正面照、三视图、表情、动作）

### scenes/\<场景名\>.md - 场景定义文件

包含：
- 基本信息（名称、类型、功能）
- 环境描述
- 氛围特点
- 关键元素
- 3个 AI 生成提示词（远景、中景、近景）

### outputs/ - 输出目录

生成的所有图片都保存在这里，按照角色/场景分组。

---

## 🎯 最佳实践

1. **从小到大**：先生成关键角色/场景，再补充次要元素
2. **质量优先**：使用自动质量检查，确保所有图片符合要求
3. **风格一致**：遵循 `style.md` 的定义，确保整体风格统一
4. **参考优化**：使用参考图输入可以显著提高一致性和质量
5. **增量更新**：项目完成后新增内容，使用 `/add-character-scene` 命令
6. **文档维护**：定期查看和更新 `updates_log.md`，记录项目进展

---

## 📞 获取帮助

- 遇到问题时，查看相应命令的详细说明
- 每个命令都有详细的任务清单和执行说明
- 使用 `/help` 命令获取更多信息

---

## 📄 许可证

这套命令集可自由使用和修改。

---

**祝你创作愉快！🎨** 

有任何问题或建议，欢迎反馈！

